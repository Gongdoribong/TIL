# 📂 [26/02/12] Diaphragm (횡격막)
```
🗓️ 기록 정보

- 날짜: 2026-02-12

- 관련 장기: 폐 (Lung), 간 (Liver)

- 핵심 키워드: #Musculofibrous_sheet #Arifact #Anatomical_Boundary
```

## 정의
- 가슴(흉강)과 배(복강)를 엄격하게 나누는 돔 모양의 얇은 근육막

- 호흡할 때 위아래로 움직이며 폐의 팽창과 수축을 돕는 가장 중요한 호흡 근육

<br>


## 의료 영상 판독에서의 중요성 -Baseline

### 1) 흉부와 복부의 경계 설정 (Segmentation의 기준)
- **Liver segmentation** : Liver는 횡격막 바로 아래에 붙어있기 때문에, AI 모델이 간의 상단 경계를 찾을 때 횡격막의 위치를 정확히 파악하지 못하면 폐의 하단부를 간으로 오해하거나 그 반대의 상황이 발생할 수 있음

- **GGO 판독** : 폐의 가장 아래쪽에 생기는 병변은 횡격막 너머의 복부 장기와 겹쳐보일 수 있기 때문에, 횡격막의 굴곡을 정확히 이해해야 병변의 정확한 위치를 특정할 수 있음


### 2) Artifact의 원인 : 호흡 조절
- CT나 MRI 촬영 시 환자가 숨을 참지 못해 횡격막이 움직이면 영상이 떨리는 Modtion Artifact 발생

- 횡격막의 움직임으로 인한 데이터 노이즈를 어떻게 처리하느냐가 Accuracy를 결정짓는 핵심 요소


### 3) 해부학적 지표
- 영상 판독시 장기의 위치를 설명할 때 Supradiaphragmatic(횡격막 상방) 혹은 Infradiaphragmatic(횡격막 하방) 이라는 표현 사용. AI 모델이 이 경계를 학습하면 장기별 자동 classification이 수월해짐

<br>

## Motion Artifact 노이즈 처리 방법

### 1) 데이터 증강(Data Augmentation)

- 모델이 깨끗한 데이터만 학습하면 실제 현장의 노이즈 섞인 데이터를 만났을 때 성능이 떨어지기 때문에 학습 단계에서 인위적을 노이즈를 섞음 


- **Elastic Deformation** : 영상을 젤리처럼 찌그러뜨리는 변환을 줌. 횡격막의 움직임과 유사한 변형을 모델에게 미리 학습시킴

- **Motion Blur Augmentation** : 특정 방향으로 블러(흐림) 처리를 하여 움직임이 발생한 것 같은 효과를 줌

> nnU-Net은 기본적으로 이런 강력한 증강 기법들이 내장되어 있어 성능이 좋은 편 


### 2) 전처리: 영상 정합 (Image Registration)
- 이미 발생한 아티팩트를 물리적으로 보정

- **Deformable Image Registraion (DIR)** : 움직임이 발생한 슬라이스들을 해부학적 구조에 맞게 다시 정렬(Alignment)하는 기술
    - 시간이 너무 오래 걸릴 수 있어 추론 시 생략하는 경우가 많음


### 3) 모델 아키텍처 (Contextual Learning)
- 단순히 한 장의 Axial만 보면 노이즈인지 장기인지 구분하기 어려움

- **3D Context 활용** : 위아래 슬라이스를 함께 보면, 특정 슬라이스에서 횡격막이 흔들렸더라도 위아래 정보를 통해 추론이 가능

- **Attention Mechanism** : 모델이 흐릿한 부분(노이즈)보다는 뚜렷한 특징이 있는 부분에 더 집중하도록 스스로 판단하게 만듦


### 4) 품질 관리 (Data Cleaning / Quality Control)
- 데이터 정리

- **Denoising Filter** : 가우시안 필터나 미디언 필터 등으로 전체적인 노이즈를 줄임

- **데이터 선별** : 연구 목적이라면, 아티팩트가 너무 심해 판독 자체가 불가능한 데이터는 학습 세트에서 과감히 제외 (GIGO)